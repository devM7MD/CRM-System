{% extends 'seller_base.html' %}
{% load i18n %}
{% load static %}

{% block title %}{% trans "Connect Sales Channel" %}{% endblock %}

{% block header %}{% trans "Connect New Sales Channel" %}{% endblock %}

{% block content %}
<div class="bg-white shadow overflow-hidden sm:rounded-lg">
    <div class="px-4 py-5 sm:px-6">
        <h3 class="text-lg leading-6 font-medium text-gray-900">{% trans "Sales Channel Integration" %}</h3>
        <p class="mt-1 max-w-2xl text-sm text-gray-500">{% trans "Connect your online store to your fulfillment account" %}</p>
    </div>
    <div class="border-t border-gray-200">
        <form method="post" class="p-6 space-y-8" enctype="multipart/form-data">
            {% csrf_token %}
            
            <!-- Platform Selection -->
            <div>
                <h4 class="text-base font-medium text-gray-900 mb-4">{% trans "Select Platform" %}</h4>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                    <label class="relative bg-white border rounded-lg p-4 flex flex-col items-center cursor-pointer hover:bg-gray-50">
                        <input type="radio" name="platform" value="shopify" class="sr-only" checked>
                        <div class="h-12 w-12 bg-green-100 rounded-full flex items-center justify-center mb-2">
                            <svg class="h-8 w-8 text-green-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                            </svg>
                        </div>
                        <span class="text-sm font-medium text-gray-900">Shopify</span>
                        <div class="absolute -top-1 -right-1 h-5 w-5 bg-primary-600 rounded-full flex items-center justify-center ring-2 ring-white">
                            <svg class="h-3 w-3 text-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                            </svg>
                        </div>
                    </label>
                    
                    <label class="relative bg-white border rounded-lg p-4 flex flex-col items-center cursor-pointer hover:bg-gray-50">
                        <input type="radio" name="platform" value="woocommerce" class="sr-only">
                        <div class="h-12 w-12 bg-purple-100 rounded-full flex items-center justify-center mb-2">
                            <svg class="h-8 w-8 text-purple-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                            </svg>
                        </div>
                        <span class="text-sm font-medium text-gray-900">WooCommerce</span>
                    </label>
                    
                    <label class="relative bg-white border rounded-lg p-4 flex flex-col items-center cursor-pointer hover:bg-gray-50">
                        <input type="radio" name="platform" value="magento" class="sr-only">
                        <div class="h-12 w-12 bg-orange-100 rounded-full flex items-center justify-center mb-2">
                            <svg class="h-8 w-8 text-orange-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                            </svg>
                        </div>
                        <span class="text-sm font-medium text-gray-900">Magento</span>
                    </label>
                    
                    <label class="relative bg-white border rounded-lg p-4 flex flex-col items-center cursor-pointer hover:bg-gray-50">
                        <input type="radio" name="platform" value="amazon" class="sr-only">
                        <div class="h-12 w-12 bg-yellow-100 rounded-full flex items-center justify-center mb-2">
                            <svg class="h-8 w-8 text-yellow-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                            </svg>
                        </div>
                        <span class="text-sm font-medium text-gray-900">Amazon</span>
                    </label>
                </div>
            </div>
            
            <!-- Store Information -->
            <div>
                <h4 class="text-base font-medium text-gray-900 mb-4">{% trans "Store Information" %}</h4>
                <div class="grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
                    <div class="sm:col-span-3">
                        <label for="store_name" class="block text-sm font-medium text-gray-700">{% trans "Store Name" %}</label>
                        <div class="mt-1">
                            <input type="text" name="store_name" id="store_name" class="shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 rounded-md" required>
                        </div>
                    </div>
                    
                    <div class="sm:col-span-3">
                        <label for="store_url" class="block text-sm font-medium text-gray-700">{% trans "Store URL" %}</label>
                        <div class="mt-1">
                            <input type="url" name="store_url" id="store_url" placeholder="https://" class="shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 rounded-md" required>
                        </div>
                    </div>
                    
                    <div class="sm:col-span-6">
                        <label for="api_key" class="block text-sm font-medium text-gray-700">{% trans "API Key" %}</label>
                        <div class="mt-1">
                            <input type="text" name="api_key" id="api_key" class="shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 rounded-md">
                        </div>
                        <p class="mt-2 text-sm text-gray-500">{% trans "You can find your API key in your store's developer settings." %}</p>
                    </div>
                    
                    <div class="sm:col-span-6">
                        <label for="api_secret" class="block text-sm font-medium text-gray-700">{% trans "API Secret" %}</label>
                        <div class="mt-1">
                            <input type="password" name="api_secret" id="api_secret" class="shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 rounded-md">
                        </div>
                    </div>
                    
                    <div class="sm:col-span-6">
                        <label for="store_logo" class="block text-sm font-medium text-gray-700">{% trans "Store Logo" %} ({% trans "Optional" %})</label>
                        <div class="mt-1 flex items-center">
                            <div class="flex-shrink-0 h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center">
                                <svg class="h-8 w-8 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>
                            </div>
                            <label for="file-upload" class="ml-5 relative cursor-pointer bg-white rounded-md font-medium text-primary-600 hover:text-primary-500 focus-within:outline-none">
                                <span>{% trans "Upload a file" %}</span>
                                <input id="file-upload" name="store_logo" type="file" class="sr-only" accept="image/*">
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sync Settings -->
            <div>
                <h4 class="text-base font-medium text-gray-900 mb-4">{% trans "Sync Settings" %}</h4>
                <div class="space-y-4">
                    <div class="relative flex items-start">
                        <div class="flex items-center h-5">
                            <input id="sync_products" name="sync_products" type="checkbox" checked class="focus:ring-primary-500 h-4 w-4 text-primary-600 border-gray-300 rounded">
                        </div>
                        <div class="ml-3 text-sm">
                            <label for="sync_products" class="font-medium text-gray-700">{% trans "Sync Products" %}</label>
                            <p class="text-gray-500">{% trans "Automatically import products from your store" %}</p>
                        </div>
                    </div>
                    
                    <div class="relative flex items-start">
                        <div class="flex items-center h-5">
                            <input id="sync_orders" name="sync_orders" type="checkbox" checked class="focus:ring-primary-500 h-4 w-4 text-primary-600 border-gray-300 rounded">
                        </div>
                        <div class="ml-3 text-sm">
                            <label for="sync_orders" class="font-medium text-gray-700">{% trans "Sync Orders" %}</label>
                            <p class="text-gray-500">{% trans "Automatically import new orders from your store" %}</p>
                        </div>
                    </div>
                    
                    <div class="relative flex items-start">
                        <div class="flex items-center h-5">
                            <input id="sync_inventory" name="sync_inventory" type="checkbox" checked class="focus:ring-primary-500 h-4 w-4 text-primary-600 border-gray-300 rounded">
                        </div>
                        <div class="ml-3 text-sm">
                            <label for="sync_inventory" class="font-medium text-gray-700">{% trans "Sync Inventory" %}</label>
                            <p class="text-gray-500">{% trans "Keep inventory levels in sync between your store and fulfillment center" %}</p>
                        </div>
                    </div>
                    
                    <div class="relative flex items-start">
                        <div class="flex items-center h-5">
                            <input id="sync_shipping" name="sync_shipping" type="checkbox" checked class="focus:ring-primary-500 h-4 w-4 text-primary-600 border-gray-300 rounded">
                        </div>
                        <div class="ml-3 text-sm">
                            <label for="sync_shipping" class="font-medium text-gray-700">{% trans "Sync Shipping Updates" %}</label>
                            <p class="text-gray-500">{% trans "Automatically update shipping status in your store when orders are shipped" %}</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="pt-5">
                <div class="flex justify-end">
                    <a href="{% url 'sellers:sales_channels' %}" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none">
                        {% trans "Cancel" %}
                    </a>
                    <button type="submit" class="ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none">
                        {% trans "Connect Store" %}
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

<div class="bg-white shadow overflow-hidden sm:rounded-lg mt-8">
    <div class="px-4 py-5 sm:px-6">
        <h3 class="text-lg leading-6 font-medium text-gray-900">{% trans "How to Connect Your Store" %}</h3>
        <p class="mt-1 max-w-2xl text-sm text-gray-500">{% trans "Follow these steps to integrate your online store" %}</p>
    </div>
    <div class="border-t border-gray-200 px-4 py-5 sm:p-6">
        <div class="space-y-6">
            <div class="flex">
                <div class="flex-shrink-0">
                    <div class="flex items-center justify-center h-8 w-8 rounded-full bg-primary-100 text-primary-600">
                        1
                    </div>
                </div>
                <div class="ml-4">
                    <h4 class="text-base font-medium text-gray-900">{% trans "Create an API Key" %}</h4>
                    <p class="mt-1 text-sm text-gray-500">{% trans "Login to your store's admin panel and navigate to the API settings to generate a new API key and secret." %}</p>
                </div>
            </div>
            
            <div class="flex">
                <div class="flex-shrink-0">
                    <div class="flex items-center justify-center h-8 w-8 rounded-full bg-primary-100 text-primary-600">
                        2
                    </div>
                </div>
                <div class="ml-4">
                    <h4 class="text-base font-medium text-gray-900">{% trans "Enter Store Details" %}</h4>
                    <p class="mt-1 text-sm text-gray-500">{% trans "Fill in your store information including the API credentials in the form above." %}</p>
                </div>
            </div>
            
            <div class="flex">
                <div class="flex-shrink-0">
                    <div class="flex items-center justify-center h-8 w-8 rounded-full bg-primary-100 text-primary-600">
                        3
                    </div>
                </div>
                <div class="ml-4">
                    <h4 class="text-base font-medium text-gray-900">{% trans "Configure Webhook URLs" %}</h4>
                    <p class="mt-1 text-sm text-gray-500">{% trans "In your store's admin panel, set up webhooks to notify our system of new orders and inventory changes." %}</p>
                </div>
            </div>
            
            <div class="flex">
                <div class="flex-shrink-0">
                    <div class="flex items-center justify-center h-8 w-8 rounded-full bg-primary-100 text-primary-600">
                        4
                    </div>
                </div>
                <div class="ml-4">
                    <h4 class="text-base font-medium text-gray-900">{% trans "Test the Connection" %}</h4>
                    <p class="mt-1 text-sm text-gray-500">{% trans "After connecting, verify that products and orders are syncing correctly between systems." %}</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Handle radio button selection
        const platformRadios = document.querySelectorAll('input[name="platform"]');
        platformRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                // Remove all selection indicators
                document.querySelectorAll('.absolute.h-5.w-5').forEach(el => {
                    el.parentNode.removeChild(el);
                });
                
                // Add selection indicator to the selected platform
                if (this.checked) {
                    const label = this.parentNode;
                    const indicator = document.createElement('div');
                    indicator.className = 'absolute -top-1 -right-1 h-5 w-5 bg-primary-600 rounded-full flex items-center justify-center ring-2 ring-white';
                    indicator.innerHTML = '<svg class="h-3 w-3 text-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>';
                    label.appendChild(indicator);
                }
            });
        });
        
        // Handle file upload preview
        const fileInput = document.getElementById('file-upload');
        fileInput.addEventListener('change', function() {
            if (this.files && this.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const container = document.querySelector('.flex-shrink-0.h-12.w-12');
                    container.innerHTML = `<img src="${e.target.result}" alt="Store Logo" class="h-12 w-12 rounded-full object-cover">`;
                }
                reader.readAsDataURL(this.files[0]);
            }
        });
    });
</script>
{% endblock %} 