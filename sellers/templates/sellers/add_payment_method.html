{% extends 'seller_base.html' %}
{% load i18n %}
{% load static %}

{% block title %}{% trans "Add Payment Method" %}{% endblock %}

{% block header %}{% trans "Add Payment Method" %}{% endblock %}

{% block content %}
<div class="bg-white shadow overflow-hidden sm:rounded-lg">
    <div class="px-4 py-5 sm:px-6">
        <h3 class="text-lg leading-6 font-medium text-gray-900">{% trans "Add a New Payment Method" %}</h3>
        <p class="mt-1 max-w-2xl text-sm text-gray-500">{% trans "Choose how you want to receive your payouts" %}</p>
    </div>
    
    <div class="border-t border-gray-200">
        <div class="bg-gray-50 px-4 py-5 sm:p-6">
            <div class="flex justify-center">
                <div class="inline-flex rounded-md shadow-sm" role="group" aria-label="Payment method type">
                    <button type="button" id="bank-tab" class="py-2 px-4 text-sm font-medium bg-white border border-r-0 border-gray-200 rounded-l-md text-yellow-600 hover:bg-gray-50 focus:z-10 focus:text-yellow-700 focus:outline-none">
                        {% trans "Bank Account" %}
                    </button>
                    <button type="button" id="paypal-tab" class="py-2 px-4 text-sm font-medium bg-gray-100 border border-gray-200 text-gray-700 hover:bg-gray-50 focus:z-10 focus:text-yellow-700 focus:outline-none">
                        {% trans "PayPal" %}
                    </button>
                    <button type="button" id="card-tab" class="py-2 px-4 text-sm font-medium bg-gray-100 border border-l-0 border-gray-200 rounded-r-md text-gray-700 hover:bg-gray-50 focus:z-10 focus:text-yellow-700 focus:outline-none">
                        {% trans "Credit Card" %}
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Bank Account Form -->
        <div id="bank-form" class="px-4 py-5 sm:p-6">
            <form method="post" action="{% url 'sellers:finance_transactions' %}" class="space-y-6">
                {% csrf_token %}
                <input type="hidden" name="action" value="save_payment_method">
                <input type="hidden" name="method_type" value="bank">
                
                <div class="grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
                    <div class="sm:col-span-3">
                        <label for="account_holder" class="block text-sm font-medium text-gray-700">{% trans "Account Holder Name" %}</label>
                        <div class="mt-1">
                            <input type="text" name="account_holder" id="account_holder" class="shadow-sm focus:ring-yellow-500 focus:border-yellow-500 block w-full sm:text-sm border-gray-300 rounded-md">
                        </div>
                    </div>
                    
                    <div class="sm:col-span-3">
                        <label for="bank_name" class="block text-sm font-medium text-gray-700">{% trans "Bank Name" %}</label>
                        <div class="mt-1">
                            <input type="text" name="bank_name" id="bank_name" class="shadow-sm focus:ring-yellow-500 focus:border-yellow-500 block w-full sm:text-sm border-gray-300 rounded-md">
                        </div>
                    </div>
                    
                    <div class="sm:col-span-3">
                        <label for="account_number" class="block text-sm font-medium text-gray-700">{% trans "Account Number" %}</label>
                        <div class="mt-1">
                            <input type="text" name="account_number" id="account_number" class="shadow-sm focus:ring-yellow-500 focus:border-yellow-500 block w-full sm:text-sm border-gray-300 rounded-md">
                        </div>
                    </div>
                    
                    <div class="sm:col-span-3">
                        <label for="routing_number" class="block text-sm font-medium text-gray-700">{% trans "Routing Number" %}</label>
                        <div class="mt-1">
                            <input type="text" name="routing_number" id="routing_number" class="shadow-sm focus:ring-yellow-500 focus:border-yellow-500 block w-full sm:text-sm border-gray-300 rounded-md">
                        </div>
                    </div>
                    
                    <div class="sm:col-span-6">
                        <div class="flex items-start">
                            <div class="flex items-center h-5">
                                <input id="make_default" name="make_default" type="checkbox" class="focus:ring-yellow-500 h-4 w-4 text-yellow-600 border-gray-300 rounded">
                            </div>
                            <div class="ml-3 text-sm">
                                <label for="make_default" class="font-medium text-gray-700">{% trans "Make this my default payment method" %}</label>
                                <p class="text-gray-500">{% trans "This payment method will be used for automatic payouts." %}</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="pt-5">
                    <div class="flex justify-end">
                        <a href="{% url 'sellers:finance_transactions' %}?action=manage_payment_methods" class="py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none">
                            {% trans "Cancel" %}
                        </a>
                        <button type="submit" class="ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none">
                            {% trans "Save Payment Method" %}
                        </button>
                    </div>
                </div>
            </form>
        </div>
        
        <!-- PayPal Form -->
        <div id="paypal-form" class="px-4 py-5 sm:p-6 hidden">
            <form method="post" action="{% url 'sellers:finance_transactions' %}" class="space-y-6">
                {% csrf_token %}
                <input type="hidden" name="action" value="save_payment_method">
                <input type="hidden" name="method_type" value="paypal">
                
                <div class="grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
                    <div class="sm:col-span-4">
                        <label for="paypal_email" class="block text-sm font-medium text-gray-700">{% trans "PayPal Email Address" %}</label>
                        <div class="mt-1">
                            <input type="email" name="paypal_email" id="paypal_email" class="shadow-sm focus:ring-yellow-500 focus:border-yellow-500 block w-full sm:text-sm border-gray-300 rounded-md">
                        </div>
                        <p class="mt-2 text-sm text-gray-500">{% trans "Enter the email address associated with your PayPal account." %}</p>
                    </div>
                    
                    <div class="sm:col-span-6">
                        <div class="flex items-start">
                            <div class="flex items-center h-5">
                                <input id="make_default_paypal" name="make_default" type="checkbox" class="focus:ring-yellow-500 h-4 w-4 text-yellow-600 border-gray-300 rounded">
                            </div>
                            <div class="ml-3 text-sm">
                                <label for="make_default_paypal" class="font-medium text-gray-700">{% trans "Make this my default payment method" %}</label>
                                <p class="text-gray-500">{% trans "This payment method will be used for automatic payouts." %}</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="pt-5">
                    <div class="flex justify-end">
                        <a href="{% url 'sellers:finance_transactions' %}?action=manage_payment_methods" class="py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none">
                            {% trans "Cancel" %}
                        </a>
                        <button type="submit" class="ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none">
                            {% trans "Save Payment Method" %}
                        </button>
                    </div>
                </div>
            </form>
        </div>
        
        <!-- Credit Card Form -->
        <div id="card-form" class="px-4 py-5 sm:p-6 hidden">
            <form method="post" action="{% url 'sellers:finance_transactions' %}" class="space-y-6">
                {% csrf_token %}
                <input type="hidden" name="action" value="save_payment_method">
                <input type="hidden" name="method_type" value="card">
                
                <div class="grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
                    <div class="sm:col-span-6">
                        <label for="card_holder" class="block text-sm font-medium text-gray-700">{% trans "Cardholder Name" %}</label>
                        <div class="mt-1">
                            <input type="text" name="card_holder" id="card_holder" class="shadow-sm focus:ring-yellow-500 focus:border-yellow-500 block w-full sm:text-sm border-gray-300 rounded-md">
                        </div>
                    </div>
                    
                    <div class="sm:col-span-4">
                        <label for="card_number" class="block text-sm font-medium text-gray-700">{% trans "Card Number" %}</label>
                        <div class="mt-1">
                            <input type="text" name="card_number" id="card_number" class="shadow-sm focus:ring-yellow-500 focus:border-yellow-500 block w-full sm:text-sm border-gray-300 rounded-md" placeholder="•••• •••• •••• ••••">
                        </div>
                    </div>
                    
                    <div class="sm:col-span-3">
                        <label for="expiry_date" class="block text-sm font-medium text-gray-700">{% trans "Expiry Date" %}</label>
                        <div class="mt-1">
                            <input type="text" name="expiry_date" id="expiry_date" class="shadow-sm focus:ring-yellow-500 focus:border-yellow-500 block w-full sm:text-sm border-gray-300 rounded-md" placeholder="MM / YY">
                        </div>
                    </div>
                    
                    <div class="sm:col-span-3">
                        <label for="cvc" class="block text-sm font-medium text-gray-700">{% trans "CVC" %}</label>
                        <div class="mt-1">
                            <input type="text" name="cvc" id="cvc" class="shadow-sm focus:ring-yellow-500 focus:border-yellow-500 block w-full sm:text-sm border-gray-300 rounded-md" placeholder="•••">
                        </div>
                    </div>
                    
                    <div class="sm:col-span-6">
                        <div class="flex items-start">
                            <div class="flex items-center h-5">
                                <input id="make_default_card" name="make_default" type="checkbox" class="focus:ring-yellow-500 h-4 w-4 text-yellow-600 border-gray-300 rounded">
                            </div>
                            <div class="ml-3 text-sm">
                                <label for="make_default_card" class="font-medium text-gray-700">{% trans "Make this my default payment method" %}</label>
                                <p class="text-gray-500">{% trans "This payment method will be used for automatic payouts." %}</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="pt-5">
                    <div class="flex justify-end">
                        <a href="{% url 'sellers:finance_transactions' %}?action=manage_payment_methods" class="py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none">
                            {% trans "Cancel" %}
                        </a>
                        <button type="submit" class="ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none">
                            {% trans "Save Payment Method" %}
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Security Notice -->
<div class="mt-8 bg-white shadow overflow-hidden sm:rounded-lg">
    <div class="px-4 py-5 sm:px-6">
        <h3 class="text-lg leading-6 font-medium text-gray-900">{% trans "Secure Payments" %}</h3>
    </div>
    <div class="border-t border-gray-200 px-4 py-5 sm:p-6">
        <div class="flex items-center">
            <div class="flex-shrink-0">
                <svg class="h-8 w-8 text-green-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                </svg>
            </div>
            <div class="ml-3">
                <h3 class="text-lg leading-6 font-medium text-gray-900">{% trans "Your information is secure" %}</h3>
                <div class="mt-2 text-sm text-gray-500">
                    <p>{% trans "All payment information is encrypted and stored securely according to PCI DSS standards. We never store your full card details on our servers." %}</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const bankTab = document.getElementById('bank-tab');
        const paypalTab = document.getElementById('paypal-tab');
        const cardTab = document.getElementById('card-tab');
        
        const bankForm = document.getElementById('bank-form');
        const paypalForm = document.getElementById('paypal-form');
        const cardForm = document.getElementById('card-form');
        
        // Show Bank form by default
        bankTab.classList.add('bg-white');
        bankTab.classList.remove('bg-gray-100');
        
        // Tab switching
        bankTab.addEventListener('click', function() {
            // Show Bank form
            bankForm.classList.remove('hidden');
            paypalForm.classList.add('hidden');
            cardForm.classList.add('hidden');
            
            // Update tab styling
            bankTab.classList.add('bg-white');
            bankTab.classList.remove('bg-gray-100');
            paypalTab.classList.add('bg-gray-100');
            paypalTab.classList.remove('bg-white');
            cardTab.classList.add('bg-gray-100');
            cardTab.classList.remove('bg-white');
        });
        
        paypalTab.addEventListener('click', function() {
            // Show PayPal form
            bankForm.classList.add('hidden');
            paypalForm.classList.remove('hidden');
            cardForm.classList.add('hidden');
            
            // Update tab styling
            bankTab.classList.add('bg-gray-100');
            bankTab.classList.remove('bg-white');
            paypalTab.classList.add('bg-white');
            paypalTab.classList.remove('bg-gray-100');
            cardTab.classList.add('bg-gray-100');
            cardTab.classList.remove('bg-white');
        });
        
        cardTab.addEventListener('click', function() {
            // Show Card form
            bankForm.classList.add('hidden');
            paypalForm.classList.add('hidden');
            cardForm.classList.remove('hidden');
            
            // Update tab styling
            bankTab.classList.add('bg-gray-100');
            bankTab.classList.remove('bg-white');
            paypalTab.classList.add('bg-gray-100');
            paypalTab.classList.remove('bg-white');
            cardTab.classList.add('bg-white');
            cardTab.classList.remove('bg-gray-100');
        });
    });
</script>
{% endblock %} 