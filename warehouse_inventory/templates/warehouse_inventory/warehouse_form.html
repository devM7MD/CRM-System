{% extends 'warehouse_inventory/base.html' %}
{% load i18n %}
{% load static %}

{% block page_title %}
{% if warehouse %}
{% trans "Edit Warehouse" %} - {{ warehouse.name }}
{% else %}
{% trans "Add New Warehouse" %}
{% endif %}
{% endblock %}

{% block inventory_content %}
<div class="max-w-3xl mx-auto">
    <form method="post" class="space-y-8">
        {% csrf_token %}
        
        <div class="bg-white shadow sm:rounded-lg">
            <div class="px-4 py-5 sm:p-6">
                <!-- Warehouse Name -->
                <div class="mb-6">
                    <label for="name" class="block text-sm font-medium text-gray-700">
                        {% trans "Warehouse Name" %}*
                    </label>
                    <input type="text" name="name" id="name" 
                           value="{{ warehouse.name|default:'' }}" required
                           class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                </div>
                
                <!-- Warehouse Code -->
                <div class="mb-6">
                    <label for="code" class="block text-sm font-medium text-gray-700">
                        {% trans "Warehouse Code" %}*
                    </label>
                    <input type="text" name="code" id="code" 
                           value="{{ warehouse.code|default:'' }}" required
                           class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                           {% if warehouse %}readonly{% endif %}>
                    <p class="mt-1 text-xs text-gray-500">{% trans "Unique code for the warehouse. This cannot be changed later." %}</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Country -->
                    <div class="mb-6">
                        <label for="country" class="block text-sm font-medium text-gray-700">
                            {% trans "Country" %}*
                        </label>
                        <input type="text" name="country" id="country" 
                               value="{{ warehouse.country|default:'' }}" required
                               class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    
                    <!-- Currency -->
                    <div class="mb-6">
                        <label for="currency" class="block text-sm font-medium text-gray-700">
                            {% trans "Currency" %}*
                        </label>
                        <input type="text" name="currency" id="currency" 
                               value="{{ warehouse.currency|default:'' }}" required
                               class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                               placeholder="USD">
                        <p class="mt-1 text-xs text-gray-500">{% trans "3-letter currency code" %}</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Zone -->
                    <div class="mb-6">
                        <label for="zone" class="block text-sm font-medium text-gray-700">
                            {% trans "Zone" %}*
                        </label>
                        <input type="text" name="zone" id="zone" 
                               value="{{ warehouse.zone|default:'' }}" required
                               class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    
                    <!-- Location -->
                    <div class="mb-6">
                        <label for="location" class="block text-sm font-medium text-gray-700">
                            {% trans "Location" %}*
                        </label>
                        <input type="text" name="location" id="location" 
                               value="{{ warehouse.location|default:'' }}" required
                               class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                </div>
                
                <!-- Is Active -->
                <div class="mb-6 flex items-start">
                    <div class="flex items-center h-5">
                        <input type="checkbox" name="is_active" id="is_active" 
                               {% if warehouse.is_active|default:True %}checked{% endif %}
                               class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded">
                    </div>
                    <div class="ml-3 text-sm">
                        <label for="is_active" class="font-medium text-gray-700">{% trans "Active" %}</label>
                        <p class="text-gray-500">{% trans "Inactive warehouses will not be available for inventory operations." %}</p>
                    </div>
                </div>
            </div>
            
            <div class="px-4 py-3 bg-gray-50 text-right sm:px-6">
                <a href="{% url 'warehouse_inventory:warehouse_list' %}" class="inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    {% trans "Cancel" %}
                </a>
                <button type="submit" class="ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    {% if warehouse %}
                    {% trans "Update Warehouse" %}
                    {% else %}
                    {% trans "Create Warehouse" %}
                    {% endif %}
                </button>
            </div>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
{{ block.super }}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('form');
    
    form.addEventListener('submit', function(e) {
        const requiredFields = form.querySelectorAll('input[required]');
        let isValid = true;
        
        requiredFields.forEach(field => {
            if (!field.value.trim()) {
                isValid = false;
                field.classList.add('border-red-500');
            } else {
                field.classList.remove('border-red-500');
            }
        });
        
        if (!isValid) {
            e.preventDefault();
            alert('{% trans "Please fill in all required fields." %}');
        }
    });
});
</script>
{% endblock %} 